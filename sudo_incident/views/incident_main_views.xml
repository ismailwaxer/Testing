<odoo>
    <data>
        <!-- Incident Tree View-->
        <record model="ir.ui.view" id="sudo_incident.list">
            <field name="name">Incident list</field>
            <field name="model">sudo_incident.sudo_incident</field>
            <field name="arch" type="xml">
                <tree string="Incident List">
                    <field name="incident_id"/>
                    <field name="title"/>
                    <field name="partner_id"/>
                    <field name="status"/>
                    <!--                    <field name="assign_group"/>-->
                    <field name="current_user"/>
                    <field name="sla_branches_in"/>
                    <!--                    <field name="outage_start_time"/>-->
                    <!--                    <field name="outage_end_time"/>-->
                </tree>
            </field>
        </record>
        <!--        Incident Form View-->
        <record id="sudo_incident_form_id" model="ir.ui.view">
            <field name="name">Incident Form</field>
            <field name="model">sudo_incident.sudo_incident</field>
            <field name="arch" type="xml">
                <form string="Incident Form" class="oe_form_configuration" duplicate="0">
                    <header>
                        <button name="assign_incident_to_self" string="ASSIGN TO ME" class="btn btn-primary"
                                type="object"/>
                        <button name="assign_incident_to_l1" string="ASSIGN TO L1" class="btn btn-primary"
                                type="object"/>
                        <!--                        <button name="test_cron_sls" string="test" class="btn btn-primary" type="object"/>-->
                        <button name="closed_to_cr" string="CLOSE THE CR" class="btn btn-primary" type="object"
                                attrs="{'invisible':[('status','!=','resolved')]}"
                                groups="sudo_incident.incident_manager_security"/>
                    </header>
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                        </div>
                        <group>
                            <group>
                                <field name="title"/>
                            </group>
                            <group>
                                <field name="sla_branches_in" readonly="1"/>
                            </group>
                            <group colspan="4">
                                <field name="description"/>
                            </group>

                            <group class="col-7">
                                <div class="oe_title">
                                    <h1>
                                        <field name="incident_id" readonly="1"/>
                                    </h1>
                                </div>
                                <field name="status"/>
                                <field name="phase"/>
                                <field name="affected_service" options="{'no_create': True,}"/>
                                <field name="affected_subservice" options="{'no_create': True,}"/>
                                <field name="cause_code"/>
                            </group>
                            <group class="col-5">
                                <field name="outage_start_time" attrs="{'required':[('assign_group','=','l1')]}"
                                       readonly="1"/>
                                <field name="outage_end_time"/>
                                <field name="partner_id" options="{'no_create': True,}"
                                       attrs="{'required':[('status','in', ['assig','work in progress','pending vendor','pending customer','pending evidence','pending other','resolved', 'closed'])]}"/>
                            </group>
                        </group>
                        <div class="container row">
                            <div class="col-6 row">
                                <div class="col-7 pl-0 row">
                                    <div class="col-2">
                                        <field name="o_is" nolabel="1"/>
                                        <field name="major_incident" attrs="{'readonly':[('check','!=',True)]}"/>
                                    </div>
                                    <div class="col-10 pl-0">
                                        <label for="o_is"/>
                                        <label for="major_incident" style="padding-top:5px;"/>
                                    </div>
                                </div>
                                <field name="check" invisible="1"/>
                                <div class="col-5 row">
                                    <div class="col-3 pl-0 row">
                                        <field name="escalated" attrs="{'readonly':[('check','!=',True)]}"/>
                                        <field name="proactive" nolabel="1"/>
                                    </div>
                                    <div class="col-9 pl-0">
                                        <label for="escalated" style="padding-top:3px;"/>
                                        <label for="proactive" style="padding-top:3px;"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <group colspan="4">
                            <field name="incident_last_status"/>
                        </group>
                        <notebook>
                            <page string="Categorization and Assignment">
                                <group>
                                    <group class="col-7">
                                        <field name="category_list" options="{'no_create': True,}"/>
                                        <field name="sub_category" options="{'no_create': True,}"/>
                                        <field name="opened_by" readonly="1"/>
                                        <field name="assign_group"/>
                                        <field name="current_user" options="{'no_create': True,}"/>


                                    </group>
                                    <group class="col-5">
                                        <field name="request_impact"/>
                                        <field name="request_type"/>
                                        <field name="priority"/>
                                        <field name="folder"/>
                                        <field name="incident_tag_new" widget="many2many_tags"
                                        />
                                    </group>
                                </group>
                            </page>
                            <page string="Tasks">
                            </page>
                            <page string="Impacted Service">
                            </page>
                            <!--                            <page string="TimeSpent">-->
                            <!--                            </page>-->
                            <page string="Workflow">
                                <form>
                                    <sheet>
                                        <group>

                                            <field name="image" widget="image" width="100%" height="100%"/>

                                        </group>

                                    </sheet>
                                </form>
                            </page>
                            <page string="Proposed Solution">
                                <field name="proposed_solution"
                                       attrs="{'required':[('status','in', ['resolved', 'closed'])]}"/>
                            </page>
                            <page string="Related Records-(0)">
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids"/>
                        <field name="activity_ids"/>
                        <field name="message_ids"/>
                    </div>
                </form>
            </field>
        </record>

        <!--        Incident search View-->
        <record model="ir.ui.view" id="sudo_incident_search_view">
            <field name="name">incident.search</field>
            <field name="model">sudo_incident.sudo_incident</field>
            <field name="arch" type="xml">
                <search>
                    <field name="title"/>
                    <field name="status"/>
                    <separator/>
                    <filter name="categorize" string="Categorize" domain="[('status', '=', 'categorize')]"/>
                    <filter name="assig" string="Assign" domain="[('status', '=', 'assig')]"/>
                    <filter name="work in progress" string="Work In Progress"
                            domain="[('status', '=', 'work in progress')]"/>
                    <filter name="pending vendor" string="Pending vendor" domain="[('status', '=', 'pending vendor')]"/>
                    <filter name="pending customer" string="Pending customer"
                            domain="[('status', '=', 'pending customer')]"/>
                    <filter name="pending evidence" string="Pending Evidence"
                            domain="[('status', '=', 'pending evidence')]"/>
                    <filter name="pending other" string="Pending Other" domain="[('status', '=', 'pending other')]"/>
                    <filter name="resolved" string="Resolved" domain="[('status', '=', 'resolved')]"/>
                    <filter name="closed" string="Other" domain="[('status', '=', 'closed')]"/>
                    <separator/>

                    <group string="Group By">
                        <filter name="by_incident" string="Incident Status"
                                context="{'group_by': 'status'}"/>
                        <filter name="by_affected_customer" string="Affected Customer"
                                context="{'group_by': 'partner_id'}"/>
                        <filter name="group_by_categorize" string="Categorize" context="{'group_by': 'status'}"/>
                        <filter name="group_by_resolved" string="Resolved"
                                context="{'group_by': 'status'}"/>
                        <filter name="group_by_closed" string="Closed" context="{'group_by': 'status'}"/>
                    </group>


                    <!--                <searchpanel>-->
                    <!--                    <field name="status"/>-->
                    <!--                    <field name="partner_id" icon="fa-users"/>-->
                    <!--                </searchpanel>-->
                </search>
            </field>
        </record>


        <!-- actions opening views on models -->

        <record model="ir.actions.act_window" id="sudo_incident_action_window">
            <field name="name">Incident Management</field>
            <field name="res_model">sudo_incident.sudo_incident</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'search_default_by_incident': 1}</field>
        </record>

        <menuitem name="Incident Management" id="sudo_incident.menu_root"
                  web_icon="sudo_incident,static/description/icon.png"/>

        <menuitem name="Services" id="sudo_incident._menu" parent="sudo_incident.menu_root"/>
        <menuitem id="sudo_incident_menu" name="Incident Management" parent="sudo_incident.menu_root"
                  action="sudo_incident_action_window" sequence="2"/>

    </data>
</odoo>